# ğŸ§© Projeto: Cliente e Servidor Web em C
# Autor: Henrique Azevedo Andrade Silva
# Disciplina: Redes de Computadores

# ========================
# ğŸ”¹ Nomes dos executÃ¡veis
# ========================
CLIENTE = meunavegador
SERVIDOR = meuservidor

# ========================
# ğŸ”¹ Arquivos fonte
# ========================
CLIENTE_SRC = cliente_http.c
SERVIDOR_SRC = servidor_http.c

# ========================
# ğŸ”¹ Compilador e flags
# ========================
CC = gcc
CFLAGS = -Wall

# ========================
# ğŸ”¹ Bibliotecas (Windows/Linux)
# ========================
ifeq ($(OS),Windows_NT)
    LIBS = -lws2_32
else
    LIBS =
endif

# ========================
# ğŸ—ï¸  Regras de compilaÃ§Ã£o
# ========================
all: $(CLIENTE) $(SERVIDOR)

$(CLIENTE): $(CLIENTE_SRC)
	@echo "ğŸ”§ Compilando cliente HTTP..."
	$(CC) $(CFLAGS) $(CLIENTE_SRC) -o $(CLIENTE) $(LIBS)
	@echo "âœ… Cliente compilado -> ./$(CLIENTE)"

$(SERVIDOR): $(SERVIDOR_SRC)
	@echo "ğŸ”§ Compilando servidor HTTP..."
	$(CC) $(CFLAGS) $(SERVIDOR_SRC) -o $(SERVIDOR) $(LIBS)
	@echo "âœ… Servidor compilado -> ./$(SERVIDOR)"

# ========================
# ğŸš€ ExecuÃ§Ã£o rÃ¡pida
# ========================
run-server:
	@echo "ğŸŒ Iniciando servidor na porta 8080..."
	@./$(SERVIDOR)

run-client:
	@echo "ğŸ’» Executando cliente para baixar arquivo..."
	@./$(CLIENTE) http://localhost/foto.jpg

# ========================
# ğŸ§¹ Limpeza
# ========================
clean:
	@echo "ğŸ§¹ Limpando binÃ¡rios..."
	rm -f $(CLIENTE) $(SERVIDOR)
